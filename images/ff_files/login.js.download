window["__@ALI_LIB_LOGIN__"]=function(e){var i={};function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)t.d(n,o,function(i){return e[i]}.bind(null,o));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=0)}([function(e,i,t){e.exports=t(1)},function(e,i,t){"use strict";t.r(i);var n=window.document,o=window.navigator.userAgent,r=location.hostname;function a(e){var i;try{i=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(n.cookie)}catch(e){}return i?i[1]:void 0}function l(e,i){i?location.replace(e):location.href=e}var c,s,d,u=o.match(/AliApp\(([^/]+)\/([\d._]+)\)/i),g="m",f="wapa",m="wapatest",p=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),v=r.match(p)||[],b=(v[2]||"taobao.com").match(/\.?taobao\.net$/)?"taobao.net":"taobao.com",h=(c=v[1]||g,"taobao.net"===b&&(c=m),c!==g&&c!==f&&c!==m&&(c=g),c),w=window.navigator.userAgent,y=/.+AliApp\((\w+)\/((?:\d+\.)+\d+)\)/.exec(w||"")||[],x=String(y[1]||"").toLowerCase(),E={xianyu:["fm"],cainiao:["cn"],taobao:["tb","tm"],jiaoyi_mao:["jym"]},L={xianyu:{loginPrefix:"passport",bizDomainPrefix:"h5",bizSubDomain:"m",mainDomain:"goofish.com"}},S=function(e,i){e&&i&&(L[e]=i)},O=function(e){var i=L[e];return i||console.warn("[lib-login] site:"+e+" config is not defined, use lib.login.setSiteDomainConfig to set config"),i},C={xianyu:{api:"mtop.idle.user.simple",v:"1.0",data:{},ecode:1,sessionOption:"AutoLoginOnly",jsonpIncPrefix:"liblogin",dataType:"json"},taobao:{api:"mtop.user.getUserSimple",v:"1.0",data:{},ecode:1,sessionOption:"AutoLoginOnly",jsonpIncPrefix:"liblogin"}},U=function(e,i){return i?i===e:!!x&&(E[e]||[]).some((function(e){return e&&x.indexOf(e)>-1}))},j=location,N=j.hostname,_=j.protocol;function P(e,i){var t,n,o=encodeURIComponent(_+"//"+N);return"taobao"===i.site?"//h5.m.taobao.com/other/"+e+"end.html?origin="+o:"//"+(t=i.site,(n=O(t)).bizDomainPrefix+"."+((null==n?void 0:n.bizSubDomain)?n.bizSubDomain+".":"")+((null==n?void 0:n.mainDomain)||"")||"market.m.taobao.com")+"/app/vip/h5-webapp/lib-login-message.html?origin="+o}var A,F=window,T=F.document,k=F.dpr||1;function D(e){return e.preventDefault(),!1}!function(e){e.widgetFrame="widgetFrame",e.widgetTitle="widgetTitle",e.iframe="iframe",e.widgetClose="widgetClose"}(A||(A={}));var I=((s={})[A.widgetFrame]={"-webkit-transform":"scale("+k+") translateZ(0)","-ms-transform":"scale("+k+") translateZ(0)",transform:"scale("+k+") translateZ(0)","-webkit-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","z-index":"999999",position:"fixed",left:"0",top:"0",right:"0",bottom:"0",background:"#FFF",display:"none"},s[A.widgetTitle]={width:"100%",height:"52px",background:"#EEE","line-height":"52px","text-align":"left","box-sizing":"border-box","padding-left":"20px",position:"absolute",left:"0",top:"0","font-size":"16px","font-weight":"bold",color:"#333"},s[A.iframe]={width:"100%",height:window.innerHeight/k+"px",border:"0",overflow:"hidden"},s[A.widgetClose]={display:"block",position:"absolute",right:"0",top:"0",height:"52px","line-height":"52px",padding:"0 20px",color:"#999"},s),R=((d={})[A.widgetFrame]={background:"rgba(90,90,90,0.3)",position:"fixed"},d[A.widgetTitle]={top:"calc(40vh - 52px)","padding-left":0,"box-shadow":"0px -2px 1px 0 rgb(180 180 180 / 20%)","border-radius":"12px 12px 0 0","background-color":"#fff","text-align":"center"},d[A.iframe]={height:"60vh","margin-top":"40vh","background-color":"#fff"},d[A.widgetClose]={"box-sizing":"content-box",width:"15px",height:"15px",padding:"18px 20px"},d),W=function(e,i){var t=I[e];if(!t)return"";i&&(t=Object.assign({},t,R[e]||{}));var n=[];for(var o in t)Object.hasOwnProperty.call(t,o)&&n.push(o+":"+t[o]);return n.join(";")},V=function(){function e(e,i){var t=this;void 0===e&&(e=""),void 0===i&&(i={useSemiLayer:!1}),this.text=(null==i?void 0:i.title)||"\u60a8\u9700\u8981\u767b\u5f55\u624d\u80fd\u7ee7\u7eed\u8bbf\u95ee",this.url=e,this.widgetFrame=document.createElement("div"),this.rect=document.documentElement.getBoundingClientRect();var n=null==i?void 0:i.useSemiLayer;this.widgetFrame.style.cssText=W(A.widgetFrame,n);var o=document.createElement("div");o.style.cssText=W(A.widgetTitle,n),o.innerText=this.text;var r=null;n?((r=document.createElement("img")).src="//gw.alicdn.com/imgextra/i2/O1CN01KQFA4M287q502xH3X_!!6000000007886-2-tps-52-54.png",this.url=this.url+(this.url.indexOf("?")?"&":"?")+"isSemiLayer=true"):(r=document.createElement("a")).innerText="\u5173\u95ed",r.style.cssText=W(A.widgetClose,n);var a=document.createElement("iframe");a.style.cssText=W(A.iframe,n),o.appendChild(r),this.widgetFrame.appendChild(o),this.widgetFrame.appendChild(a),T.body.appendChild(this.widgetFrame),a.src=this.url,r.addEventListener("click",(function(){t.hide();var e=T.createEvent("HTMLEvents");e.initEvent("close",!1,!1),t.widgetFrame.dispatchEvent(e)}),!1)}var i=e.prototype;return i.show=function(){document.addEventListener("touchmove",D,!1),this.widgetFrame.style.display="block",window.scrollTo(0,0)},i.hide=function(){document.removeEventListener("touchmove",D),window.scrollTo(0,-this.rect.top),T.body.removeChild(this.widgetFrame)},i.addEventListener=function(e,i,t){this.widgetFrame.addEventListener(e,i,t)},i.removeEventListener=function(e,i,t){this.widgetFrame.removeEventListener(e,i,t)},e}();!function(e,i,t){var n=e.Promise;function o(t,n,o){var r=i.login.generateUrl(t,n);if(!e||!e.WindVane||!e.WindVane.isAvailable)return console.warn("WINDVANE_NOT_FOUND::\u7f3a\u5c11WindVane\u73af\u5883"),void l(r,n.replace);e.WindVane.call("aluUccJSBridge","uccTrustLogin",{site:n.site,scene:n.scene},(function(e){if((null==e?void 0:e.ret)&&e.ret.indexOf("HY_SUCCESS")>-1)return o?void o("SUCCESS"):void l(n.redirectUrl||location.href,n.replace);o?o("FAILURE",JSON.stringify(e)):console.warn("[lib-login] FAILURE with "+JSON.stringify(e))}),(function(e){(null==e?void 0:e.ret)&&e.ret.indexOf("HY_NO_HANDLER")>-1?l(r,n.replace):o&&o("FAILURE",JSON.stringify(e))}))}function r(t,n,r){var a;"function"==typeof n?(r=n,n=null):"string"==typeof n?n={redirectUrl:n}:"object"==typeof n&&n.url&&(n.redirectUrl=n.url),n=n||{};var c=(null===(a=null==i?void 0:i.login)||void 0===a?void 0:a.config)||{},s=c.site||"taobao",d=c.scene||"",g=c.clientSite||"",f=c.disbleWidgetLogin||c.disableWidgetLogin,m=i.login.generateUrl(t,Object.assign({site:s},n));if(u)return r&&n.forceNative&&U(s,g)?void function(t,n,o){e&&e.WindVane&&e.WindVane.isAvailable||console.warn("WINDVANE_NOT_FOUND::\u7f3a\u5c11WindVane\u73af\u5883"),e.WindVane.call("aluWVJSBridge","sdkLogin",n,(function(){o("SUCCESS")}),(function(e){var r=e&&e.ret;r&&"HY_FAILED"===r?o("CANCEL"):r&&r.indexOf("HY_")>-1?l(i.login.generateUrl(t,n),n.replace):o("CANCEL")}))}(t,Object.assign({site:s},n),r):U(s,g)||"taobao"===s?(e.WindVane&&e.WindVane.isAvailable&&e.WindVane.call("MtopWVPlugin","isSupportAccountSite",{accountSite:s},(function(){U(s,g)?l(m,n.replace):o(t,Object.assign({site:s,scene:d},n),r)}),(function(){l(i.login.generateUrl(t,Object.assign({site:"taobao"},n)),n.replace)})),void l(m,n.replace)):void o(t,Object.assign({site:s,scene:d},n),r);!r||"login"!==t||f?l(m,n.replace):function(t,n,o){var r=P(t,n),a=i.login.generateUrl(t,Object.assign({redirectUrl:r,iframe:!0},n)),l=new V(a,Object.assign(Object.assign({},i.login.config.widgetConfig),{title:n.title}));function c(){l.removeEventListener("close",c),e.removeEventListener("message",s),o("CANCEL")}function s(i){var t=i.data||{};if(t&&t.type&&"child"===t.type)return t.content&&t.content.indexOf("SUCCESS")>-1?(l.removeEventListener("close",c),e.removeEventListener("message",s),l.hide(),void o("SUCCESS")):void o("FAILURE")}l.addEventListener("close",c,!1),e.addEventListener("message",s,!1),l.show()}(t,Object.assign({site:s},n),r)}function c(e,i,t){var o;if(n&&((o={}).promise=new n((function(e,i){o.resolve=e,o.reject=i}))),r(e,i,(function(e){"function"==typeof t&&t(e),"SUCCESS"===e?o&&o.resolve(e):o&&o.reject(e)})),o)return o.promise}i.login=i.login||{},i.login.config={loginName:"login.htm",logoutName:"logout.htm",subDomain:h,forceNative:!0,disableWidgetLogin:!1,site:"",clientSite:""},i.login.isLogin=function(e){var n,o=(null===(n=null==i?void 0:i.login)||void 0===n?void 0:n.config)||{};if(e&&"function"==typeof e&&i.mtop){var r=C.taobao,a=o.site;a&&C[a]&&(r=C[a]);var l=o.loginCheckMtopConf;return l&&l.api&&l.v&&(r=l),i.mtop.request(r,(function(n){n.retType===i.mtop.RESPONSE_TYPE.SUCCESS?e(!0,n):n.retType===i.mtop.RESPONSE_TYPE.SESSION_EXPIRED?e(!1,n):e(t,n)})),null}return!!this.getUserNick()},i.login.isLoginAsync=function(e){var i;if(n&&((i={}).promise=new n((function(e,t){i.resolve=e,i.reject=t}))),this.isLogin((function(t,n){e&&e(t,n),!0===t?i&&i.resolve(n):i&&i.reject(n)})),i)return i.promise},i.login.getUserNick=function(e){return e&&"function"==typeof e?(this.isLogin((function(i,n){var o,r,a=(null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.displayNick)||(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.nick);e(!0===i&&a?a:!1===i?"":t)})),null):(i="",n=a("_w_tb_nick"),o=a("_nk_")||a("snk"),r=a("sn"),n&&n.length>0&&"null"!==n?i=decodeURIComponent(n):o&&o.length>0&&"null"!==o?i=unescape(unescape(o).replace(/\\u/g,"%u")):r&&r.length>0&&"null"!==r&&(i=decodeURIComponent(r)),i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var i,n,o,r},i.login.getUserNickAsync=function(e){var i;if(n&&((i={}).promise=new n((function(e,t){i.resolve=e,i.reject=t}))),this.getUserNick((function(t){"function"==typeof e&&e(t),t?i&&i.resolve(t):i&&i.reject()})),i)return i.promise},i.login.generateUrl=function(e,t){var n=i.login.config,o=n.subDomain,r=n.loginName,a=void 0===r?"login.htm":r,l=n.logoutName,c=void 0===l?"logout.htm":l,s=function(e,i){if(void 0===e&&(e="taobao"),void 0===i&&(i="m"),"taobao"===e)return"//login."+i+"."+b;var t=O(e);return"//"+((null==t?void 0:t.loginPrefix)||"")+"."+((null==t?void 0:t.mainDomain)||"")}(t.site||"taobao",o),d=function(e){var i=e.site,t=void 0===i?"taobao":i,n=e.type,o=void 0===n?"login":n,r=e.originLoginPath,a=void 0===r?"login.htm":r,l=e.originLogoutPath,c=void 0===l?"logout.htm":l;return"taobao"===t?"logout"===o?"/"+c:"/"+a:"logout"===o?"/"+c:"login.htm"!==a?"/"+a:"/mini_"+a}({site:t.site||"taobao",originLoginPath:a,originLogoutPath:c,type:e}),u=function(e){var i=e.isFrame,t=void 0!==i&&i,n=e.site,o=void 0===n?"taobao":n,r=e.type,a=void 0===r?"login":r,l=e.redirectUrl,c=e.customParams,s=void 0===c?{}:c,d=l||location.href,u={taobao:Object.assign({ttid:t?"h5@iframe":"",redirectURL:d},s),siteLoginParams:Object.assign({ttid:t?"h5@iframe":"",redirectType:t?"iframeRedirect":"Redirect",returnUrl:d,appName:o,appEntrance:"web",isMobile:"true"},s),siteLogoutParams:Object.assign({toUrl:d},s)};return"taobao"===o?u.taobao:"login"===a?u.siteLoginParams:u.siteLogoutParams}({site:t.site,isFrame:!!t.iframe,redirectUrl:t.redirectUrl,type:e,customParams:i.login.config.loginUrlParams||{}}),g=function(e,i){var t=[];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.push(n+"="+encodeURIComponent(i[n]));var o=e;return/\?/.test(e)?e+"&"+t.join("&"):o+"?"+t.join("&")}(""+s+d,u);return g},i.login.goLogin=function(e){r("login",e,null)},i.login.goLoginAsync=function(e,t){return"boolean"==typeof e&&(t=e,e=null),void 0===t&&(t=i.login.config.forceNative),c("login",{forceNative:t},e)},i.login.goLogout=function(e){r("logout",e,null)},i.login.goLogoutAsync=function(e,i){return"boolean"==typeof e&&(i=e,e=null),c("logout",{forceNative:i},e)},i.login.setSiteDomainConfig=S}(window,window.lib||(window.lib={}));i.default=window.lib.login}]);